<div class="grid grid-cols-1 lg:grid-cols-4 gap-4 p-2 rounded-lg shadow-sm">

  <!-- Search by name -->
  <div class="space-y-2">
    <label for="materialName" class="block text-sm font-medium text-gray-700">Search Material</label>
    <p-iconfield>
      <p-inputicon styleClass="pi pi-search" />
      <input
        id="materialName"
        type="text"
        pInputText
        [formControl]="nameFc()"
        placeholder="Search by name..."
        class="w-full"
      />
    </p-iconfield>
  </div>

  <!-- Filter by type -->
  <div class="space-y-2">
    <label for="materialType" class="block text-sm font-medium text-gray-700">Material Type</label>
    <p-dropdown
      id="materialType"
      [formControl]="typeFc()"
      [options]="materialTypeOptions$ | async"
      placeholder="All types"
      [showClear]="true"
      [filter]="true"
      class="w-full"
      [loading]="(materialTypeOptions$ | async) === null"
    />
  </div>

  <!-- Filter by brand -->
  <div class="space-y-2">
    <label for="materialBrand" class="block text-sm font-medium text-gray-700">Brand</label>
    <p-dropdown
      id="materialBrand"
      [formControl]="brandFc()"
      [options]="materialBrandOptions$ | async"
      placeholder="All brands"
      [showClear]="true"
      [filter]="true"
      class="w-full"
      [loading]="(materialBrandOptions$ | async) === null"
    />
  </div>

  <!-- Actions -->
  <div class="space-y-2 flex flex-col justify-end">
    <div class="flex gap-2">
      <p-button
        icon="pi pi-filter-slash"
        label="Clear"
        severity="secondary"
        size="small"
        [text]="true"
        (onClick)="clearFilters()"
        [disabled]="!hasActiveFilters()"
        class="flex-1"
      />
      <p-button
        icon="pi pi-refresh"
        severity="secondary"
        size="small"
        [text]="true"
        (onClick)="refreshData()"
        pTooltip="Refresh filters"
        tooltipPosition="top"
      />
    </div>

    <div class="flex flex-wrap gap-1" *ngIf="hasActiveFilters()">
      <p-chip
        *ngIf="nameFc().value"
        [label]="'Name: ' + nameFc().value"
        [removable]="true"
        (onRemove)="nameFc().setValue('')"
        styleClass="text-xs"
      />
      <p-chip
        *ngIf="typeFc().value"
        [label]="'Type: ' + typeFc().value"
        [removable]="true"
        (onRemove)="typeFc().setValue(null)"
        styleClass="text-xs"
      />
      <p-chip
        *ngIf="brandFc().value"
        [label]="'Brand: ' + brandFc().value"
        [removable]="true"
        (onRemove)="brandFc().setValue(null)"
        styleClass="text-xs"
      />
    </div>
  </div>

</div>
